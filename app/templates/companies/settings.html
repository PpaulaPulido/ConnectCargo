{% extends "/companies/base_company.html" %}

{% block title %}Configuración - ConnectCargo{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/settings_company.css') }}">
{% endblock %}

{% block content %}
<div class="settings-company-container">
    <!-- Header -->
    <div class="settings-company-header">
        <div class="settings-company-header-content">
            <h1 class="settings-company-title">Configuración</h1>
            <p class="settings-company-subtitle">Gestiona la configuración de tu cuenta y preferencias</p>
        </div>
        <div class="settings-company-header-actions">
            <button class="settings-btn settings-btn-secondary" id="resetSettings">
                <i class="fas fa-undo"></i>
                Restablecer
            </button>
            <button class="settings-btn settings-btn-primary" id="saveSettings">
                <i class="fas fa-save"></i>
                Guardar Cambios
            </button>
        </div>
    </div>

    <div class="settings-company-content">
        <!-- Sidebar de Navegación -->
        <div class="settings-company-sidebar">
            <nav class="settings-company-nav">
                <a href="#profile" class="settings-nav-item settings-nav-active" data-tab="profile">
                    <i class="fas fa-user-circle"></i>
                    Perfil Empresa
                </a>
                <a href="#notifications" class="settings-nav-item" data-tab="notifications">
                    <i class="fas fa-bell"></i>
                    Notificaciones
                    <span class="settings-nav-badge">3</span>
                </a>
                <a href="#security" class="settings-nav-item" data-tab="security">
                    <i class="fas fa-shield-alt"></i>
                    Seguridad
                </a>
                <a href="#billing" class="settings-nav-item" data-tab="billing">
                    <i class="fas fa-credit-card"></i>
                    Facturación
                    <span class="settings-nav-badge settings-premium">Premium</span>
                </a>
                <a href="#preferences" class="settings-nav-item" data-tab="preferences">
                    <i class="fas fa-sliders-h"></i>
                    Preferencias
                </a>
                <a href="#team" class="settings-nav-item" data-tab="team">
                    <i class="fas fa-users"></i>
                    Miembros del Equipo
                    <span class="settings-nav-badge">2</span>
                </a>
            </nav>

            <!-- Estado del Sistema -->
            <div class="settings-system-status">
                <h4>Estado del Sistema</h4>
                <div class="settings-status-item">
                    <span class="settings-status-label">Cuenta Verificada</span>
                    <span class="settings-status-badge settings-success">
                        <i class="fas fa-check-circle"></i>
                        Verificada
                    </span>
                </div>
                <div class="settings-status-item">
                    <span class="settings-status-label">Plan Actual</span>
                    <span class="settings-status-badge settings-premium">Premium</span>
                </div>
                <div class="settings-status-item">
                    <span class="settings-status-label">Miembro desde</span>
                    <span class="settings-status-value">Ene 15, 2024</span>
                </div>
            </div>
        </div>

        <!-- Contenido Principal -->
        <div class="settings-company-main">
            <!-- Pestaña: Perfil Empresa -->
            <div class="settings-company-tab settings-tab-active" id="profile-tab">
                <div class="settings-tab-header">
                    <h2>
                        <i class="fas fa-user-circle"></i>
                        Perfil de Empresa
                    </h2>
                    <p>Gestiona la información básica de tu empresa</p>
                </div>

                <div class="settings-company-section">
                    <div class="settings-section-header">
                        <h3>Información Básica</h3>
                        <span class="settings-section-badge">Requerido</span>
                    </div>
                    
                    <div class="settings-form-grid">
                        <div class="settings-form-group">
                            <label for="companyName">Nombre Legal de la Empresa</label>
                            <input type="text" id="companyName" class="settings-form-input" 
                                   value="TechCorp Solutions SAS" required>
                            <span class="settings-form-help">Nombre registrado en cámara de comercio</span>
                        </div>

                        <div class="settings-form-group">
                            <label for="commercialName">Nombre Comercial</label>
                            <input type="text" id="commercialName" class="settings-form-input" 
                                   value="TechCorp Solutions">
                        </div>

                        <div class="settings-form-group">
                            <label for="companyNIT">NIT</label>
                            <input type="text" id="companyNIT" class="settings-form-input" 
                                   value="901.234.567-8" required>
                        </div>

                        <div class="settings-form-group">
                            <label for="companyType">Tipo de Empresa</label>
                            <select id="companyType" class="settings-form-select">
                                <option value="sas">SAS - Sociedad por Acciones Simplificada</option>
                                <option value="ltda">LTDA - Sociedad Limitada</option>
                                <option value="sa">SA - Sociedad Anónima</option>
                                <option value="natural">Persona Natural</option>
                            </select>
                        </div>

                        <div class="settings-form-group settings-full-width">
                            <label for="companyAddress">Dirección Legal</label>
                            <input type="text" id="companyAddress" class="settings-form-input" 
                                   value="Carrera 15 # 95-74, Bogotá D.C.">
                        </div>
                    </div>
                </div>

                <div class="settings-company-section">
                    <div class="settings-section-header">
                        <h3>Información de Contacto</h3>
                    </div>
                    
                    <div class="settings-form-grid">
                        <div class="settings-form-group">
                            <label for="contactEmail">Email Principal</label>
                            <input type="email" id="contactEmail" class="settings-form-input" 
                                   value="contacto@techcorp.com" required>
                        </div>

                        <div class="settings-form-group">
                            <label for="contactPhone">Teléfono Principal</label>
                            <input type="tel" id="contactPhone" class="settings-form-input" 
                                   value="+57 321 456 7890" required>
                        </div>

                        <div class="settings-form-group">
                            <label for="secondaryPhone">Teléfono Secundario</label>
                            <input type="tel" id="secondaryPhone" class="settings-form-input" 
                                   value="+57 315 789 1234">
                        </div>

                        <div class="settings-form-group">
                            <label for="companyWebsite">Sitio Web</label>
                            <input type="url" id="companyWebsite" class="settings-form-input" 
                                   value="https://techcorp.com">
                        </div>
                    </div>
                </div>

                <div class="settings-company-section">
                    <div class="settings-section-header">
                        <h3>Logo de la Empresa</h3>
                    </div>
                    
                    <div class="settings-logo-upload">
                        <div class="settings-logo-preview">
                            <div class="settings-logo-placeholder">
                                <i class="fas fa-building"></i>
                                <span>Logo no establecido</span>
                            </div>
                            <img id="settingsLogoPreview" src="" alt="Logo de la empresa" style="display: none;">
                        </div>
                        <div class="settings-logo-actions">
                            <button class="settings-btn settings-btn-secondary" id="uploadLogo">
                                <i class="fas fa-upload"></i>
                                Subir Logo
                            </button>
                            <button class="settings-btn settings-btn-outline" id="removeLogo" disabled>
                                <i class="fas fa-trash"></i>
                                Eliminar
                            </button>
                            <input type="file" id="settingsLogoInput" accept="image/*" style="display: none;">
                        </div>
                        <div class="settings-logo-help">
                            <p><strong>Recomendaciones:</strong> PNG o JPG, máximo 2MB. Tamaño recomendado: 400x400px</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Pestaña: Notificaciones -->
            <div class="settings-company-tab" id="notifications-tab">
                <div class="settings-tab-header">
                    <h2>
                        <i class="fas fa-bell"></i>
                        Configuración de Notificaciones
                    </h2>
                    <p>Controla cómo y cuándo recibir notificaciones</p>
                </div>

                <div class="settings-company-section">
                    <div class="settings-section-header">
                        <h3>Preferencias de Notificaciones</h3>
                    </div>
                    
                    <div class="settings-notifications-list">
                        <div class="settings-notification-item">
                            <div class="settings-notification-info">
                                <h4>Notificaciones por Email</h4>
                                <p>Recibe notificaciones importantes por correo electrónico</p>
                            </div>
                            <label class="settings-toggle-switch">
                                <input type="checkbox" checked>
                                <span class="settings-toggle-slider"></span>
                            </label>
                        </div>

                        <div class="settings-notification-item">
                            <div class="settings-notification-info">
                                <h4>Notificaciones Push</h4>
                                <p>Notificaciones en tiempo real en tu navegador</p>
                            </div>
                            <label class="settings-toggle-switch">
                                <input type="checkbox" checked>
                                <span class="settings-toggle-slider"></span>
                            </label>
                        </div>

                        <div class="settings-notification-item">
                            <div class="settings-notification-info">
                                <h4>Notificaciones por SMS</h4>
                                <p>Mensajes de texto para alertas críticas</p>
                            </div>
                            <label class="settings-toggle-switch">
                                <input type="checkbox">
                                <span class="settings-toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="settings-company-section">
                    <div class="settings-section-header">
                        <h3>Tipos de Notificaciones</h3>
                    </div>
                    
                    <div class="settings-notification-categories">
                        <div class="settings-category-group">
                            <h4>Gestión de Cargas</h4>
                            <div class="settings-category-item">
                                <span>Nuevas ofertas de transportistas</span>
                                <label class="settings-toggle-switch settings-toggle-small">
                                    <input type="checkbox" checked>
                                    <span class="settings-toggle-slider"></span>
                                </label>
                            </div>
                            <div class="settings-category-item">
                                <span>Cambios de estado en envíos</span>
                                <label class="settings-toggle-switch settings-toggle-small">
                                    <input type="checkbox" checked>
                                    <span class="settings-toggle-slider"></span>
                                </label>
                            </div>
                            <div class="settings-category-item">
                                <span>Recordatorios de publicación</span>
                                <label class="settings-toggle-switch settings-toggle-small">
                                    <input type="checkbox">
                                    <span class="settings-toggle-slider"></span>
                                </label>
                            </div>
                        </div>

                        <div class="settings-category-group">
                            <h4>Pagos y Facturación</h4>
                            <div class="settings-category-item">
                                <span>Recordatorios de pago</span>
                                <label class="settings-toggle-switch settings-toggle-small">
                                    <input type="checkbox" checked>
                                    <span class="settings-toggle-slider"></span>
                                </label>
                            </div>
                            <div class="settings-category-item">
                                <span>Facturas generadas</span>
                                <label class="settings-toggle-switch settings-toggle-small">
                                    <input type="checkbox" checked>
                                    <span class="settings-toggle-slider"></span>
                                </label>
                            </div>
                            <div class="settings-category-item">
                                <span>Actualizaciones de suscripción</span>
                                <label class="settings-toggle-switch settings-toggle-small">
                                    <input type="checkbox" checked>
                                    <span class="settings-toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Pestaña: Seguridad -->
            <div class="settings-company-tab" id="security-tab">
                <div class="settings-tab-header">
                    <h2>
                        <i class="fas fa-shield-alt"></i>
                        Seguridad y Acceso
                    </h2>
                    <p>Gestiona la seguridad de tu cuenta y dispositivos conectados</p>
                </div>

                <div class="settings-company-section">
                    <div class="settings-section-header">
                        <h3>Contraseña</h3>
                    </div>
                    
                    <div class="settings-security-item">
                        <div class="settings-security-info">
                            <h4>Cambiar Contraseña</h4>
                            <p>Actualiza tu contraseña regularmente para mantener la seguridad</p>
                        </div>
                        <button class="settings-btn settings-btn-outline" id="changePassword">
                            <i class="fas fa-key"></i>
                            Cambiar Contraseña
                        </button>
                    </div>

                    <div class="settings-password-form" id="settingsPasswordForm" style="display: none;">
                        <div class="settings-form-grid">
                            <div class="settings-form-group">
                                <label for="currentPassword">Contraseña Actual</label>
                                <input type="password" id="currentPassword" class="settings-form-input">
                            </div>
                            <div class="settings-form-group">
                                <label for="newPassword">Nueva Contraseña</label>
                                <input type="password" id="newPassword" class="settings-form-input">
                                <div class="settings-password-strength">
                                    <div class="settings-strength-bar"></div>
                                    <span class="settings-strength-text">Seguridad: Débil</span>
                                </div>
                            </div>
                            <div class="settings-form-group">
                                <label for="confirmPassword">Confirmar Contraseña</label>
                                <input type="password" id="confirmPassword" class="settings-form-input">
                            </div>
                        </div>
                        <div class="settings-form-actions">
                            <button class="settings-btn settings-btn-secondary" id="cancelPassword">Cancelar</button>
                            <button class="settings-btn settings-btn-primary" id="savePassword">Guardar Contraseña</button>
                        </div>
                    </div>
                </div>

                <div class="settings-company-section">
                    <div class="settings-section-header">
                        <h3>Sesiones Activas</h3>
                    </div>
                    
                    <div class="settings-sessions-list">
                        <div class="settings-session-item settings-current-session">
                            <div class="settings-session-info">
                                <div class="settings-session-device">
                                    <i class="fas fa-desktop"></i>
                                    <div>
                                        <strong>Chrome en Windows</strong>
                                        <span>Bogotá, Colombia • Sesión actual</span>
                                    </div>
                                </div>
                                <span class="settings-session-time">Activo ahora</span>
                            </div>
                        </div>

                        <div class="settings-session-item">
                            <div class="settings-session-info">
                                <div class="settings-session-device">
                                    <i class="fas fa-mobile-alt"></i>
                                    <div>
                                        <strong>Safari en iPhone</strong>
                                        <span>Medellín, Colombia</span>
                                    </div>
                                </div>
                                <span class="settings-session-time">Hace 2 horas</span>
                            </div>
                            <button class="settings-btn settings-btn-text settings-btn-danger">
                                <i class="fas fa-sign-out-alt"></i>
                                Cerrar Sesión
                            </button>
                        </div>
                    </div>

                    <div class="settings-session-actions">
                        <button class="settings-btn settings-btn-outline settings-btn-danger" id="logoutAll">
                            <i class="fas fa-sign-out-alt"></i>
                            Cerrar Todas las Sesiones
                        </button>
                    </div>
                </div>
            </div>

            <!-- Otras pestañas (estructura similar) -->
            <div class="settings-company-tab" id="billing-tab">
                <div class="settings-tab-header">
                    <h2>
                        <i class="fas fa-credit-card"></i>
                        Facturación y Suscripción
                    </h2>
                    <p>Gestiona tu plan de suscripción y métodos de pago</p>
                </div>
                <!-- Contenido de facturación -->
            </div>

            <!-- Mensaje de Guardado -->
            <div class="settings-save-indicator" id="settingsSaveIndicator">
                <i class="fas fa-check-circle"></i>
                <span>Cambios guardados correctamente</span>
            </div>
        </div>
    </div>
</div>

<!-- Modal de Confirmación -->
<div class="settings-modal" id="settingsConfirmationModal">
    <div class="settings-modal-content">
        <div class="settings-modal-header">
            <h3>Confirmar Acción</h3>
            <button class="settings-modal-close" id="settingsModalClose">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="settings-modal-body">
            <p id="settingsModalMessage">¿Estás seguro de que quieres realizar esta acción?</p>
        </div>
        <div class="settings-modal-footer">
            <button class="settings-btn settings-btn-secondary" id="settingsModalCancel">Cancelar</button>
            <button class="settings-btn settings-btn-primary" id="settingsModalConfirm">Confirmar</button>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/settings_company.js') }}"></script>
{% endblock %}